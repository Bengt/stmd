<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title></title>
<style type="text/css">
  body { font-family: Helvetica, arial, freesans, clean, sans-serif;
    line-height: 1.4;
    max-width: 48em;
    margin: auto;
    color: #333333;
    background-color: #fff;
    font-size: 13pt;
  }
div#TOC ul { list-style: none; }
h1 { font-size: 140%; font-weight: bold; border-top: 1px solid gray; padding-top: 0.5em; }
h2 { font-size: 120%; font-weight: bold; }
h3 { font-size: 110%; font-weight: bold; }
h4 { font-size: 100%; font-weight: bold; }
span.space { position: relative; }
span.space:after {
  content: "";
  position: absolute;
  /* create a mark that indicates a space (trick from D. Greenspan) */
  top: 3px; bottom: 3px; left: 1px; right: 1px;
  border: 1px solid #999;
}
div.example { overflow: hidden; }
p { text-align: justify; }
pre { padding: 0.5em; margin-left: 0; margin-right: 0; margin-top: 0.2em;
  margin-bottom: 0.5em; font-size: 88%; }
pre {
 white-space: pre-wrap;       /* css-3 */
 white-space: -moz-pre-wrap;  /* Mozilla, since 1999 */
 white-space: -pre-wrap;      /* Opera 4-6 */
 white-space: -o-pre-wrap;    /* Opera 7 */
 word-wrap: break-word;       /* Internet Explorer 5.5+ */
}
code { font-family: monospace; }
div.example > pre { float:left; width: 48%; }
div.example > pre.markdown { clear:left; }
pre.tree { font-weight: bold; color: #777; }
pre.markdown { background-color: #D3E1E4; }
pre.html { background-color: #C9CaCE; }
pre.html span.space:after {
  border: 1px solid #666;
}
div.examplenum { font-size: 82%; text-align: left; }
a.footnoteRef > sup:before {
  content: "[";
}
a.footnoteRef > sup:after {
  content: "]";
}
a.footnoteRef > sup {
  vertical-align: baseline;
  font-size: 100%;
}
</style>
</head>
<body>
<div class="authors">

</div>
<div id="TOC">

</div>
<h1 id="standard-markdown">Standard markdown</h1>
<p>Standard markdown is a <a href="http://jgm.github.io/stmd/spec.html">specification of markdown syntax</a>, together with BSD3-licensed implementations (<code>stmd</code>) in C and javascript.
The source for the spec and the two implementations can be found in <a href="http://github.com/jgm/stmd">this repository</a>.</p>
<p>The C implementation provides both a library and a standalone program <code>stmd</code> that converts markdown to HTML. It is written in standard C99 and has no library dependencies.</p>
<p>The javascript implementation is a single javascript file, with no dependencies.  <a href="http://jgm.github.io/stmd/js/">Try it now!</a></p>
<p><a href="http://jgm.github.io/stmd/spec.html">The spec</a> contains over 400 embedded examples which serve as conformance tests. (The source contains a perl script that will run the tests against any markdown program.)</p>
<p>The spec is written from the point of view of the human writer, not the
computer reader. It is not an algorithm—an English translation of a computer
program—but a declarative description of what counts as a block quote, a code
block, and each of the other structural elements that can make up a markdown
document. For the most part, the spec limits itself to the basic elements
described in John Gruber’s <a href="http://daringfireball.net/projects/markdown/syntax">canonical syntax description</a>, eschewing extensions like
footnotes and definition lists. It is important to get the core right before
considering such things.</p>
<p>Because Gruber’s syntax description leaves many aspects of the syntax undetermined, writing a precise spec requires making a large number of decisions, many of them somewhat arbitrary. In making them, I have appealed to existing conventions and considerations of simplicity, readability, expressive power, and consistency. I have tried to ensure that “normal” documents in the many incompatible existing implementations of markdown will render, as far as possible, as their authors intended. And I have tried to make the rules for different elements work together harmoniously. In places where different decisions could have been made (for example, the rules governing list indentation), I have explained the rationale for my choices. In a few cases, I have departed slightly from the canonical syntax description, in ways that I think further the goals of markdown as stated in that description.</p>
<p>There are only a few places where this spec says things that are contradict
the canonical syntax description:</p>
<ul>
<li><p>It allows all puncutation symbols to be backslash-escaped, not just the symbols with special meanings in markdown. I found that it was just too hard to remember which symbols could be escaped.</p></li>
<li><p>It introduces an alternative syntax for hard line breaks, a backslash at the end of the line, supplementing the two-spaces-at-the-end-of-line rule. This is motivated by persistent complaints about the &ldquo;invisible&rdquo; nature of the two-space rule.</p></li>
<li><p>Link syntax has been made a bit more predictable (in a backwards-compatible way). For example, <code>Markdown.pl</code> allows single quotes around a title in inline links, but not in reference links. This kind of difference is really hard for users to remember, so the spec <a href="http://jgm.github.io/stmd/spec.html#links">allows single quotes in both contexts</a>.</p></li>
<li><p>The rule for HTML blocks differs, though in most real cases it shouldn't 
make a difference. (See <a href="http://jgm.github.io/stmd/spec.html#html-blocks">here</a> for details.) The spec's proposal makes it easy to include markdown inside HTML block-level tags, if you want to, but also allows you to exclude this. It is also makes parsing much easier, avoiding expensive backtracking.</p></li>
<li><p>It does not collapse adjacent bird-track blocks into a single blockquote:</p></li>
</ul>
<blockquote>
<p>this is</p>
</blockquote>
<blockquote>
<p>two block quotes</p>
</blockquote>
<blockquote>
<p>this is</p>
<p>one block quote with two paragraphs</p>
</blockquote>
<ul>
<li><p>Rules for content in lists differ in a few respects, though (as with HTML blocks), most lists in existing documents should render as intended. There is some discussion of the choice points and differences <a href="http://jgm.github.io/stmd/spec.html#motivation">here</a>. I think that the spec's proposal does better than any existing implementation in rendering lists the way a human writer or reader would intuitively understand them. (I could give numerous examples of perfectly natural looking lists that nearly every existing implementation flubs up.)</p></li>
<li><p>The spec stipulates that two blank lines break out of all list contexts. This is an attempt to deal with issues that often come up when someone wants to have two adjacent lists, or a list followed by an indented code block.</p></li>
<li><p>Changing bullet characters, or changing from bullets to numbers or vice versa, starts a new list. I think that is almost always going to be the writer's intent.</p></li>
<li><p>The start number of an ordered list is significant.</p></li>
</ul>
<p>In all of this, I have been guided by eight years experience writing
markdown implementations in several languages, including the first markdown
parser not based on regular expression substitutions (<a
  href="http://github.com/jgm/pandoc">pandoc</a>) and the first markdown
parsers based on PEG grammars (<a
  href="http://github.com/jgm/peg-markdown">peg-markdown</a>, <a
  href="http://github.com/jgm/lunamark">lunamark</a>). Maintaining these
projects and responding to years of user feedback have given me a good sense of
the complexities involved in parsing markdown, and of the various design
decisions that can be made. I have also explored differences between markdown
implementations extensively using <a
  href="http://johnmacfarlane.net/babelmark2/">babelmark 2</a>. In the early
phases of working out the spec, I benefited greatly from collaboration with
David Greenspan, and from extensive discussions with a group of industrial
users of markdown, including Jeff Atwood, Vincent Marti, and Neil Williams.</p>
</body>
</html>
